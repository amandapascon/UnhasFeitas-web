{"ast":null,"code":"var _jsxFileName = \"/home/amandapascon/\\xC1rea de Trabalho/APLICA\\xC7\\xD5ES/Unhas Feitas/web/src/pages/Login.js\";\nimport React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { TextField, Button, ButtonGroup, Typography } from '@material-ui/core';\nimport api from '../api';\nimport './Login.css'; // TODO: POST /login-external\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.form = null;\n    this.state = {\n      email: '',\n      password: '',\n      error: /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 18,\n          columnNumber: 14\n        }\n      })\n    };\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem('auth_token')) this.props.history.push('/');\n  } // TODO: login\n\n\n  onSubmit(e) {\n    if (e) e.preventDefault();\n    api.post('/login', {\n      email: this.state.email,\n      password: this.state.password\n    }).then(res => {\n      if (res.data.token) {\n        localStorage.clear();\n        localStorage.setItem('name', res.data.name);\n        localStorage.setItem('auth_token', res.data.token);\n        if (res.data.admin) localStorage.setItem('admin', 'true'); //this.props.history.push('/')\n\n        window.location.href = `/`; //localStorage.getItem('aa')\n        //localStorage.removeItem('aa')\n        //localStorage.clear()\n      } else {\n        //deu ruim\n        this.setState({\n          error: /*#__PURE__*/React.createElement(Typography, {\n            display: \"block\",\n            align: \"center\",\n            color: \"error\",\n            variant: \"button\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 32\n            }\n          }, \"Email e/ou senha incorretos\")\n        });\n      }\n    });\n  }\n\n  back() {\n    window.location.href = `/`;\n  } // TODO: design\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"main\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"page-home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"banner\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"chamada\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      ref: x => this.form = x,\n      className: \"box\",\n      onSubmit: e => this.onSubmit(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }\n    }, this.state.error, /*#__PURE__*/React.createElement(TextField, {\n      id: \"email\",\n      className: \"input\",\n      label: \"E-mail\",\n      variant: \"outlined\",\n      value: this.state.email,\n      onChange: e => this.setState({\n        email: e.target.value\n      }),\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(TextField, {\n      id: \"password\",\n      className: \"input\",\n      label: \"Senha\",\n      variant: \"outlined\",\n      type: \"password\",\n      autoComplete: \"current-password\",\n      value: this.state.password,\n      onChange: e => this.setState({\n        password: e.target.value\n      }),\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(ButtonGroup, {\n      disableElevation: true,\n      variant: \"contained\",\n      color: \"text.disabled\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      id: \"login\",\n      onClick: this.onSubmit(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(Button, {\n      onClick: this.back,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }\n    }, \"Voltar\"))))));\n  }\n\n}\n\nexport default withRouter(Login);","map":{"version":3,"sources":["/home/amandapascon/Área de Trabalho/APLICAÇÕES/Unhas Feitas/web/src/pages/Login.js"],"names":["React","Component","Link","withRouter","TextField","Button","ButtonGroup","Typography","api","Login","constructor","props","form","state","email","password","error","componentDidMount","localStorage","getItem","history","push","onSubmit","e","preventDefault","post","then","res","data","token","clear","setItem","name","admin","window","location","href","setState","back","render","x","target","value"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Link, withRouter } from 'react-router-dom'\nimport { TextField, Button, ButtonGroup, Typography } from '@material-ui/core'\nimport api from '../api'\n\nimport './Login.css'\n\n\n// TODO: POST /login-external\nclass Login extends Component {\n  constructor(props) {\n    super(props)\n\n    this.form = null\n    this.state = {\n      email: '',\n      password: '',\n      error: <span></span>,\n    }\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem('auth_token'))\n      this.props.history.push('/')\n  }\n\n  // TODO: login\n  onSubmit(e) {\n    if (e) e.preventDefault()\n\n    api.post('/login', { email: this.state.email, password: this.state.password })\n    .then(res => {\n      if (res.data.token){\n        localStorage.clear()\n        localStorage.setItem('name', res.data.name)\n        localStorage.setItem('auth_token', res.data.token)\n\n        if (res.data.admin)\n          localStorage.setItem('admin', 'true')\n\n        //this.props.history.push('/')\n        window.location.href = `/`\n        //localStorage.getItem('aa')\n        //localStorage.removeItem('aa')\n        //localStorage.clear()\n      }else{\n        //deu ruim\n        this.setState({ error: <Typography display='block' align='center' color='error' variant='button'>Email e/ou senha incorretos</Typography>})\n      }\n    })\n  }\n\n  back(){\n    window.location.href = `/`\n  }\n\n  // TODO: design\n  render() {\n    return (\n        <main>\n        <div className='page-home'>\n          <div id='banner'>\n            <div className='container'>\n              <div className=\"chamada\">\n                <form ref={x => this.form = x} className='box' onSubmit={ e => this.onSubmit(e) }>\n                    { this.state.error }\n                    <TextField id='email' className='input' label='E-mail' variant='outlined' value={this.state.email} onChange={e => this.setState({ email: e.target.value })} required />\n                    <TextField id='password' className='input' label='Senha' variant='outlined' type='password' autoComplete='current-password' value={this.state.password} onChange={e => this.setState({ password: e.target.value })} required />\n                    </form>\n              </div>\n            <ButtonGroup disableElevation variant=\"contained\" color=\"text.disabled\">\n                <Button id='login' onClick={ this.onSubmit() } >Login</Button>\n                <Button onClick = { this.back} >Voltar</Button>\n            </ButtonGroup>\n           </div>\n          </div>\n        </div>\n      </main>\n    )\n  }\n}\nexport default withRouter(Login)"]},"metadata":{},"sourceType":"module"}